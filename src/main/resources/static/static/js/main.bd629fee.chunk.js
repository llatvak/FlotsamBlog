(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{37:function(e,t,a){e.exports=a(65)},65:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(19),r=a.n(c),o=a(7),i=a(14),m=(a(42),a(4)),s=a(5),u=a.n(s),E=a(3),p=a(8),d=a(9),g={marginTop:"7px"};function f(e){var t=e.post,a=Object(n.useState)(!1),c=Object(m.a)(a,2),r=c[0],i=c[1];"".concat(t.id);var s="/posts/".concat(t.id);return Object(n.useEffect)((function(){var e=[];localStorage.getItem("readPosts")?(e=JSON.parse(localStorage.getItem("readPosts"))).includes(t.id)||i(!0):localStorage.setItem("readPosts",JSON.stringify(e))}),[]),l.a.createElement("div",null,l.a.createElement(E.c,null,l.a.createElement(E.c.Image,{size:"16by9"},l.a.createElement(E.l.Container,{size:"16by9"},l.a.createElement(E.l,{src:t.imageUrl}))),l.a.createElement(E.c.Content,null,l.a.createElement(E.u,{size:4},t.title),l.a.createElement(E.u,{subtitle:!0},t.description),l.a.createElement(E.b,{as:o.b,to:s,color:"primary",onClick:function(e){var a=[];localStorage.getItem("readPosts")&&(a=JSON.parse(localStorage.getItem("readPosts"))),a.includes(t.id)||a.push(t.id),localStorage.setItem("readPosts",JSON.stringify(a))}},"Read more"),function(){if(!r)return l.a.createElement(E.k,{style:g},l.a.createElement(p.a,{icon:d.a}))}()),l.a.createElement(E.c.Footer,null,t.date)))}function b(e){var t=Object(n.useState)(e.posts),a=Object(m.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){r(e.posts)}),[e.posts]),l.a.createElement("div",null,l.a.createElement(E.e,null,l.a.createElement(E.d.Group,{vcentered:!0,multiline:!0},c.map((function(e){return l.a.createElement(E.d,{key:e.id,size:"one-third"},l.a.createElement(f,{key:e.id,post:e}))})))))}function h(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){u.a.get("https://flotsamblog.herokuapp.com/api/posts/").then((function(e){c(e.data),console.log(e)})).catch((function(e){alert("".concat(e))}))}),[]),l.a.createElement("div",null,l.a.createElement(b,{posts:a}))}var O={margin:"60px"},v={marginTop:"20px"};function j(e){var t="https://flotsamblog.herokuapp.com/api/posts/";var a=Object(n.useState)(""),c=Object(m.a)(a,2),r=c[0],i=c[1],s=Object(n.useState)(""),g=Object(m.a)(s,2),f=g[0],b=g[1],h=Object(n.useState)(""),j=Object(m.a)(h,2),k=j[0],S=j[1],y=Object(n.useState)(""),I=Object(m.a)(y,2),C=I[0],w=I[1],x=Object(n.useState)("https://bulma.io/images/placeholders/128x128.png"),D=Object(m.a)(x,2),P=D[0],B=D[1],q=Object(n.useState)("https://bulma.io/images/placeholders/128x128.png"),z=Object(m.a)(q,2),N=z[0],T=z[1],J=Object(n.useState)(""),L=Object(m.a)(J,2),R=L[0],H=L[1],U=Object(n.useState)([]),W=Object(m.a)(U,2),A=W[0],F=W[1],G=Object(n.useState)(new Date),M=Object(m.a)(G,2),Y=M[0],V=M[1],$=Object(n.useState)("".concat(Y.getDate(),".").concat(Y.getMonth()+1,".").concat(Y.getFullYear())),_=Object(m.a)($,2),K=_[0],Q=_[1],X=Object(n.useState)(!1),Z=Object(m.a)(X,2),ee=Z[0],te=Z[1],ae=Object(n.useState)(!0),ne=Object(m.a)(ae,2),le=ne[0],ce=ne[1];Object(n.useEffect)((function(){if(u.a.get("https://flotsamblog.herokuapp.com/api/categories/").then((function(e){F(e.data)})).catch((function(e){alert("Backend error: ".concat(e))})),void 0!==e.location.state){var t=e.location.state.postData;console.log(t),i(t.id),b(t.title),S(t.description),w(t.body),B(t.imageUrl),H(t.category),Q(t.date),te(!0)}}),[]);var re={title:f,description:k,body:C,imageUrl:P,date:K,category:R,url:t};return l.a.createElement("div",null,l.a.createElement(E.e,{breakpoint:"touch"},l.a.createElement(E.a,{style:O},l.a.createElement("form",null,l.a.createElement(E.i,null,l.a.createElement(E.n,null,"Title"),l.a.createElement(E.g,null,l.a.createElement(E.m,{placeholder:"Post title",value:f,onChange:function(e){b(e.target.value)},required:!0}))),l.a.createElement(E.i,null,l.a.createElement(E.n,null,"Body"),l.a.createElement(E.g,null,l.a.createElement(E.t,{rows:15,placeholder:"Write here",value:C,onChange:function(e){var t=e.target.value.substring(0,40)+"...";S(t),w(e.target.value)},required:!0}))),l.a.createElement(E.i,null,l.a.createElement(E.n,null,"Category"),l.a.createElement(E.g,null,l.a.createElement(E.r.Container,null,l.a.createElement(E.r,{onChange:function(e){e.preventDefault(),H(e.target.value)}},l.a.createElement(E.r.Option,null,"None"),A.map((function(e){return l.a.createElement(E.r.Option,{key:e.title,value:e.title},e.title)})))))),l.a.createElement(E.n,null,"Image"),l.a.createElement(E.i,{kind:"addons"},l.a.createElement(E.g,{iconLeft:!0},l.a.createElement(E.m,{placeholder:"Image URL",onChange:function(e){e.preventDefault(),T(e.target.value)}}),l.a.createElement(E.k,{size:"small",align:"left"},l.a.createElement(p.a,{icon:d.d}))),l.a.createElement(E.g,null,l.a.createElement(E.b,{onClick:function(e){e.preventDefault(),B(N)},color:"link"},"Add"))),l.a.createElement(E.i,null,l.a.createElement(E.j,null,l.a.createElement(E.j.Label,null,l.a.createElement(E.j.Input,{name:"image"}),l.a.createElement(E.j.CTA,null,l.a.createElement(E.j.Icon,null,l.a.createElement(p.a,{icon:d.g})),l.a.createElement(E.j.Label,{as:"span"},"Choose an Image"))))),l.a.createElement(E.p,null,l.a.createElement(E.p.Item,{as:"figure",align:"left"},l.a.createElement(E.l.Container,{as:"p",size:128},l.a.createElement("a",{href:P,target:"_blank",rel:"noreferrer noopener"},l.a.createElement(E.l,{alt:"Image preview",src:P}))))),l.a.createElement(E.h,null),l.a.createElement(E.i,{kind:"group"},l.a.createElement(E.g,{style:v},l.a.createElement(E.b.Group,null,l.a.createElement(E.b,{onClick:function(e){e.preventDefault(),ee?(t+="".concat(r),u.a.put(t,re).then((function(e){console.log(e),alert("Post ".concat(re.title," updated"))})).catch((function(e){console.log(e),alert("Error: Post '".concat(re.title,"' was not updated"))}))):(V(new Date),u.a.post(t,re).then((function(e){console.log(e),alert("Post ".concat(re.title," created"))})).catch((function(e){console.log(e),alert("Error: Post '".concat(re.title,"' was not posted"))}))),console.log("submit")},color:"link"},"Publish"),l.a.createElement(E.b,{onClick:function(e){e.preventDefault(),ce(!le)}},"Preview"),l.a.createElement(E.b,{text:!0,as:o.b,to:"/"},"Cancel"))))))),l.a.createElement("div",{hidden:le}))}var k={margin:"20px"};function S(e){var t=Object(n.useState)("default"),a=Object(m.a)(t,2),c=a[0],r=a[1],o=Object(n.useState)(!1),i=Object(m.a)(o,2),s=i[0],g=i[1],f=Object(n.useState)(!1),b=Object(m.a)(f,2),h=b[0],O=b[1],v=e.comment,j="".concat("https://flotsamblog.herokuapp.com/api/comments/").concat(v.id);Object(n.useEffect)((function(){localStorage.getItem("likedComments".concat(v.postId))&&JSON.parse(localStorage.getItem("likedComments".concat(v.postId))).includes(v.id)&&!h&&(g(!0),r("red"),O(!0))}),[s]);var S=function(e){var t={author:v.author,content:v.content,date:v.date,likes:v.likes,postId:v.postId};u.a.put(j,t).then((function(e){console.log(e)})).catch((function(e){alert("".concat(e))}))};return l.a.createElement("div",null,l.a.createElement(E.p,{style:k},l.a.createElement(E.p.Item,{as:"figure",align:"left"},l.a.createElement(p.a,{size:"3x",icon:d.h})),l.a.createElement(E.p.Item,{align:"content"},l.a.createElement(E.f,null,l.a.createElement("p",null,l.a.createElement("strong",null,v.author)," ",l.a.createElement("small",null,"@",v.author)," ",l.a.createElement("small",null,v.date),l.a.createElement("br",null),v.content)),l.a.createElement(E.o,{breakpoint:"mobile"},l.a.createElement(E.o.Item,{align:"left"},l.a.createElement(E.o.Item,null,l.a.createElement("small",null,l.a.createElement("a",{href:"#reply"},"Reply"))),l.a.createElement(E.o.Item,{as:"a"},l.a.createElement(E.k,{size:"small"},l.a.createElement(p.a,{color:c,icon:d.c,onClick:function(){return function(e){var t=[];localStorage.getItem("likedComments".concat(v.postId))&&(t=JSON.parse(localStorage.getItem("likedComments".concat(v.postId)))),t.includes(v.id)||t.push(v.id),localStorage.setItem("likedComments".concat(v.postId),JSON.stringify(t)),s?(S(--v.likes),r("default"),g(!1),localStorage.setItem("likedComments".concat(v.postId),"")):(r("red"),S(++v.likes),g(!0))}()}}))),l.a.createElement(E.f,null,l.a.createElement("small",null,v.likes)))))))}var y={margin:"auto",marginTop:"60px",marginBottom:"100px",maxWidth:"50%"},I={marginTop:"20px",marginBottom:"20px"},C={borderRadius:"5px"},w={padding:"50px"},x={width:"50%",marginLeft:"25%",marginRight:"25%"},D={margin:"20px"},P={};function B(e){var t=e.match.params.id,a=Object(n.useState)([]),c=Object(m.a)(a,2),r=c[0],o=c[1],i=Object(n.useState)(!0),s=Object(m.a)(i,2),g=s[0],f=s[1],b=Object(n.useState)([]),h=Object(m.a)(b,2),O=h[0],v=h[1],j=Object(n.useState)(""),k=Object(m.a)(j,2),B=k[0],q=k[1],z="https://flotsamblog.herokuapp.com/api/posts/"+"".concat(t),N="https://flotsamblog.herokuapp.com/api/comments/";Object(n.useEffect)((function(){T(),J()}),[]);var T=function(){u.a.get(z).then((function(e){o(e.data),console.log(e)})).catch((function(e){alert("".concat(e))}))},J=function(){u.a.get(N).then((function(e){L(e.data),console.log(e)})).catch((function(e){alert("".concat(e))}))},L=function(e){for(var a=[],n=0;n<e.length;n++)Number(e[n].postId)===Number(t)&&a.push(e[n]);v(a)},R=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[l,a,n].join(".")};return l.a.createElement("div",null,l.a.createElement(E.a,{breakpoint:"tablet",style:y},l.a.createElement(E.f,{style:w},l.a.createElement(E.u,{style:P},r.title),l.a.createElement(E.u,{style:P,size:6},r.category),l.a.createElement("p",null,r.date)),l.a.createElement(E.l.Container,{size:"16by9",style:I},l.a.createElement(E.l,{src:r.imageUrl,style:C})),l.a.createElement(E.f,null,l.a.createElement("p",null,r.body)),l.a.createElement(E.g,null,l.a.createElement(E.b,{style:x,outlined:!0,color:"#333",key:"#333",onClick:function(){return f(!g)}},"View Comments (",O.length,")")),l.a.createElement(E.f,{hidden:g,key:O.id},O.map((function(e){return l.a.createElement(S,{key:e.id,comment:e,postId:r.id})}))),l.a.createElement(E.f,{hidden:g},l.a.createElement(E.p,{style:D,as:"article"},l.a.createElement(E.p.Item,{align:"left"},l.a.createElement(p.a,{size:"3x",icon:d.h})),l.a.createElement(E.p.Item,{align:"content"},l.a.createElement(E.i,null,l.a.createElement(E.g,{as:"p"},l.a.createElement(E.t,{ref:function(e){q(e)},placeholder:"Add a comment..."}))),l.a.createElement(E.i,null,l.a.createElement(E.g,{as:"p"},l.a.createElement(E.b,{onClick:function(e){var a=R((new Date).toString()),n=B.value;if(B.value.length>0){var l={author:"Guest515",content:n,date:a,likes:0,postId:t};u.a.post(N,l).then((function(e){console.log(e),B.value=""})).then((function(){return J()})).catch((function(e){alert("".concat(e))}))}else alert("Comment length must be at least 1")}},"Post comment"))))))))}var q={margin:"auto",padding:"50px",marginTop:"150px",maxWidth:"40%"},z={};function N(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2);a[0],a[1];return l.a.createElement("div",null,l.a.createElement(E.a,{style:q},l.a.createElement(E.u,null,"Login"),l.a.createElement(E.i,{style:z},l.a.createElement(E.n,null,"Username"),l.a.createElement(E.g,null,l.a.createElement(E.m,{type:"text",placeholder:"Username"}))),l.a.createElement(E.i,{style:z},l.a.createElement(E.n,null,"Password"),l.a.createElement(E.g,null,l.a.createElement(E.m,{type:"password",placeholder:"Password"}))),l.a.createElement(E.i,null,l.a.createElement(E.g,null,l.a.createElement(E.b,{as:o.b,to:"/user/dashboard",color:"success"},"Login")))))}var T={margin:"auto",padding:"50px",marginTop:"50px",maxWidth:"80%"};function J(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],r=a[1],i="https://flotsamblog.herokuapp.com/api/posts/";return Object(n.useEffect)((function(){u.a.get(i).then((function(e){r(e.data)})).catch((function(e){alert("".concat(e))}))}),[]),l.a.createElement("div",null,l.a.createElement(E.a,{style:T},l.a.createElement(E.u,null,"Dashboard"),l.a.createElement(E.b,{as:o.b,to:"/user/new",color:"primary"},"New post"),l.a.createElement(E.n,null,"All posts"),l.a.createElement(E.i,{kind:"addons"},l.a.createElement(E.g,null,l.a.createElement(E.m,{disabled:!0,placeholder:"Search"})),l.a.createElement(E.g,null,l.a.createElement(E.b,{disabled:!0,color:"info"},l.a.createElement(E.k,null,l.a.createElement(p.a,{icon:d.e}))))),l.a.createElement(E.s,{fullwidth:!0},l.a.createElement(E.s.Head,null,l.a.createElement(E.s.Row,null,l.a.createElement(E.s.Heading,null,"ID"),l.a.createElement(E.s.Heading,null,"Title"),l.a.createElement(E.s.Heading,null,"Description"),l.a.createElement(E.s.Heading,null,"Date"),l.a.createElement(E.s.Heading,null,"Edit"),l.a.createElement(E.s.Heading,null,"Remove"))),l.a.createElement(E.s.Body,null,c.map((function(e){return l.a.createElement(E.s.Row,{key:e.id},l.a.createElement(E.s.Cell,null,e.id),l.a.createElement(E.s.Cell,null,e.title),l.a.createElement(E.s.Cell,null,(t=e.description,t.substring(0,40)+"...")),l.a.createElement(E.s.Cell,null,e.date),l.a.createElement(E.s.Cell,null,l.a.createElement(E.b,{color:"info",as:o.b,to:{pathname:"/user/new",state:{postData:e}}},l.a.createElement(E.k,null,l.a.createElement(p.a,{icon:d.b})))),l.a.createElement(E.s.Cell,null,l.a.createElement(E.b,{color:"danger",onClick:function(t){return function(e,t){console.log("delete ".concat(e)),u.a.delete(i+e).then((function(e){console.log(e)})).catch((function(e){alert("Error: Post  was not deleted")}));for(var a=[],n=0;n<c.length;n++)if(c[n].id===e){console.log(c[n].id),c.splice(n,1),a=c.splice(0);break}r(a)}(e.id)}},l.a.createElement(E.k,null,l.a.createElement(p.a,{icon:d.f})))));var t}))))))}function L(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(""),r=Object(m.a)(c,2),s=r[0],g=r[1],f=Object(n.useState)([]),b=Object(m.a)(f,2),h=b[0],O=b[1],v=Object(n.useState)([]),j=Object(m.a)(v,2),k=j[0],S=j[1],y=Object(i.f)();Object(n.useEffect)((function(){u.a.get("https://flotsamblog.herokuapp.com/api/categories/").then((function(e){a(e.data)})).catch((function(e){alert("Backend error: ".concat(e))})),u.a.get("https://flotsamblog.herokuapp.com/api/posts/").then((function(e){O(e.data)})).catch((function(e){alert("Backend error: ".concat(e))}))}),[]);var I=function(){var e;e=h.filter((function(e){return-1!==e.title.toLowerCase().indexOf(s.toLowerCase())})),S(e)};return l.a.createElement("div",null,l.a.createElement(E.i,{kind:"addons"},l.a.createElement(E.g,null,l.a.createElement(E.m,{type:"text",value:s,onChange:function(e){g(e.target.value),I()},placeholder:"Search posts"})),l.a.createElement(E.g,null,l.a.createElement(E.b,{color:"primary",onClick:function(e){"/search"===y.pathname&&console.log(!0)},as:o.b,to:{pathname:"/search",state:{results:k}}},l.a.createElement(E.k,null,l.a.createElement(p.a,{icon:d.e}))))))}function R(){var e=Object(n.useState)(!1),t=Object(m.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(m.a)(r,2),s=i[0],g=i[1];return Object(n.useEffect)((function(){u.a.get("https://flotsamblog.herokuapp.com/api/categories/").then((function(e){g(e.data)})).catch((function(e){alert("Backend error: ".concat(e))}))}),[]),l.a.createElement("div",null,l.a.createElement(E.q,{fixed:"top",active:a},l.a.createElement(E.q.Brand,null,l.a.createElement(E.q.Item,{as:o.b,to:"/"},l.a.createElement(E.l,{src:"logo.png"})),l.a.createElement(E.q.Burger,{onClick:function(){return c(!a)}})),l.a.createElement(E.q.Menu,null,l.a.createElement(E.q.Segment,{align:"start"},s.map((function(e){return l.a.createElement(E.q.Item,{key:e.id},e.title)}))),l.a.createElement(E.q.Segment,{align:"end"},l.a.createElement(E.q.Item,{as:"div"},l.a.createElement(L,null)),l.a.createElement(E.q.Item,{as:"div"},l.a.createElement(E.k,{as:o.b,to:"/user/login"},l.a.createElement(p.a,{icon:d.h})))))))}function H(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){if(void 0!==e.location.state){var t=e.location.state.results;r(t)}}),[]),l.a.createElement("div",null,l.a.createElement(E.e,null,l.a.createElement(E.u,null,"Results: ",c.length," "),l.a.createElement(b,{posts:c}),l.a.createElement(E.b,{style:{marginTop:"20px"},as:o.b,to:"/"},"Back")))}function U(){return l.a.createElement(o.a,null,l.a.createElement(R,null),l.a.createElement("div",null,l.a.createElement(i.c,null,l.a.createElement(i.a,{path:"/",exact:!0,component:h}),l.a.createElement(i.a,{path:"/search",component:H}),l.a.createElement(i.a,{path:"/posts/:id",component:B}),l.a.createElement(i.a,{path:"/user/new",component:j}),l.a.createElement(i.a,{path:"/user/login",component:N}),l.a.createElement(i.a,{path:"/user/dashboard",component:J}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.bd629fee.chunk.js.map