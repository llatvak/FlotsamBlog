(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{45:function(e,t,a){e.exports=a(84)},84:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(23),r=a.n(c),o=a(5),i=a(12),m=a(18),u=(a(50),Object(n.createContext)());function s(){return Object(n.useContext)(u)}var d=a(44);var p=function(e){var t=e.component,a=Object(d.a)(e,["component"]),n=s().authTokens;return l.a.createElement(m.b,Object.assign({},a,{render:function(e){return n?l.a.createElement(t,e):l.a.createElement(m.a,{to:"/login"})}}))},E=a(7),g=a.n(E),f=a(9),b=a(10),h=a(3),v={marginTop:"10px"},O={marginTop:"5px",marginLeft:"20px"},y={marginRight:"3px"};function j(e){var t=e.post,a=Object(n.useState)(!1),c=Object(o.a)(a,2),r=c[0],u=c[1],s=Object(n.useState)((localStorage.getItem("readPosts")||localStorage.setItem("readPosts",JSON.stringify([])),JSON.parse(localStorage.getItem("readPosts")))),d=Object(o.a)(s,2),p=d[0],E=d[1],g=Object(m.g)();"".concat(t.id);var j="/posts/".concat(t.id);function k(e){window.scrollTo(0,0);var a=JSON.parse(localStorage.getItem("readPosts"));a.includes(t.id)||a.push(t.id),localStorage.setItem("readPosts",JSON.stringify(a)),E(JSON.stringify(a))}Object(n.useEffect)((function(){p.includes(t.id)&&!0!==r&&u(!0)}),[]);return l.a.createElement("div",null,l.a.createElement(h.c,null,l.a.createElement(h.c.Image,{size:"16by9"},l.a.createElement(h.m.Container,{size:"16by9"},l.a.createElement(h.m,{src:t.imageUrl}))),l.a.createElement(h.c.Content,null,l.a.createElement(h.p,null,l.a.createElement(h.p.Item,{align:"left"},t.date),l.a.createElement(h.p.Item,{align:"right",onClick:function(e){g.push({pathname:"/search",state:{query:e.target.lastChild.data}})}},l.a.createElement("a",null,t.category))),l.a.createElement("span",null,l.a.createElement(h.v,{as:i.b,to:j,size:4,onClick:k},t.title)),l.a.createElement("span",null,l.a.createElement(h.v,{subtitle:!0,style:v,responsive:{touch:{hide:{value:!0}}}},t.description))),l.a.createElement(h.c.Content,null,r?l.a.createElement("span",null,l.a.createElement(h.b,{as:i.b,to:j,color:"light",onClick:k},"Read more")):l.a.createElement("span",null,l.a.createElement(h.b,{as:i.b,to:j,color:"primary",onClick:k},"Read more")),l.a.createElement(h.l,{style:O,color:"grey"},l.a.createElement(f.a,{style:y,size:"lg",icon:b.d}),l.a.createElement("small",null,t.postLikes)))))}function k(e){var t=Object(n.useState)(e.posts),a=Object(o.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){r(e.posts)}),[e.posts]),l.a.createElement("div",null,l.a.createElement(h.e,null,l.a.createElement(h.d.Group,{multiline:!0},c.map((function(e){return l.a.createElement(h.d,{key:e.id,size:"one-third"},l.a.createElement(j,{key:e.id,post:e}))})))))}var C={marginBottom:"50px"},S={bottom:"20px",right:"20px",position:"fixed"};function w(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){g.a.get("https://flotsamblog.herokuapp.com/api/posts/").then((function(e){c(e.data)})).catch((function(e){alert("".concat(e))}))}),[]);return a.reverse(),l.a.createElement("div",null,l.a.createElement(h.k,{color:"primary",style:C},l.a.createElement(h.k.Body,null,l.a.createElement(h.e,null,l.a.createElement(h.v,null,"FlotsamBlog"),l.a.createElement(h.v,{as:"h2",subtitle:!0},"Read like you've never read before!")))),l.a.createElement(k,{posts:a}),l.a.createElement("div",null,l.a.createElement(h.b,{style:S,onClick:function(){window.scrollTo(0,0)},color:"primary"},l.a.createElement(h.l,{size:"small"},l.a.createElement(f.a,{icon:b.a})))))}var x=a(22),I=a(6),B=a.n(I),D={margin:"60px"},T={marginTop:"20px"};function L(e){var t,a,c,r,i,u,s,d="https://flotsamblog.herokuapp.com/api/posts/";var p=Object(n.useState)(""),E=Object(o.a)(p,2),v=E[0],O=E[1],y=Object(n.useState)(""),j=Object(o.a)(y,2),k=j[0],C=j[1],S=Object(n.useState)(""),w=Object(o.a)(S,2),L=w[0],P=w[1],q=Object(n.useState)(""),N=Object(o.a)(q,2),M=N[0],z=N[1],J=Object(n.useState)("https://source.unsplash.com/random/1600x900/?technology"),R=Object(o.a)(J,2),H=R[0],U=R[1],A=Object(n.useState)("https://source.unsplash.com/random/1600x900/?technology"),G=Object(o.a)(A,2),W=G[0],F=G[1],K=Object(n.useState)(""),Y=Object(o.a)(K,2),V=Y[0],$=Y[1],_=Object(n.useState)([]),Q=Object(o.a)(_,2),X=Q[0],Z=Q[1],ee=Object(n.useState)(new Date),te=Object(o.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)("".concat(ae.getDate(),".").concat(ae.getMonth()+1,".").concat(ae.getFullYear())),ce=Object(o.a)(le,2),re=ce[0],oe=ce[1],ie=Object(n.useState)(!1),me=Object(o.a)(ie,2),ue=me[0],se=me[1],de=Object(x.a)(),pe=de.register,Ee=de.handleSubmit,ge=de.errors,fe=Object(m.g)(),be=Object(I.useModali)({animated:!0,title:"Publish a new post?",message:"Post will be public",buttons:[l.a.createElement(B.a.Button,{label:"Cancel",isStyleCancel:!0,onClick:function(){return Oe()}}),l.a.createElement(B.a.Button,{label:"Publish",isStyleDefault:!0,onClick:function(){return Be()}})]}),he=Object(o.a)(be,2),ve=he[0],Oe=he[1],ye=Object(I.useModali)({animated:!0,title:"Cancel and go to dashboard?",message:"All modified data will be lost",buttons:[l.a.createElement(B.a.Button,{label:"Continue writing",isStyleCancel:!0,onClick:function(){return Ce()}}),l.a.createElement(B.a.Button,{label:"Go to dashboard",isStyleDestructive:!0,onClick:function(){return De()}})]}),je=Object(o.a)(ye,2),ke=je[0],Ce=je[1],Se=Object(I.useModali)({animated:!0,title:"Post ".concat(k," was created/updated"),message:"Return to dashboard or go to home page?",onHide:function(){fe.push({pathname:"/dashboard"})},buttons:[l.a.createElement(B.a.Button,{label:"Go to home",isStyleDefault:!0,onClick:function(){return Le()}}),l.a.createElement(B.a.Button,{label:"Go to dashboard",isStyleDefault:!0,onClick:function(){return Te()}})]}),we=Object(o.a)(Se,2),xe=we[0],Ie=we[1];Object(n.useEffect)((function(){if(g.a.get("https://flotsamblog.herokuapp.com/api/categories/").then((function(e){Z(e.data)})).catch((function(e){alert("Backend error: ".concat(e))})),void 0!==e.location.state){var t=e.location.state.postData;O(t.id),C(t.title),P(t.description),z(t.body),U(t.imageUrl),$(t.category),oe(t.date),se(!0)}}),[]);var Be=function(e){ue?(d+="".concat(v),g.a.put(d,Pe).then((function(e){Ie()})).catch((function(e){console.log(e),alert("Error: Post '".concat(Pe.title,"' was not updated"))}))):(ne(new Date),g.a.post(d,Pe).then((function(e){Ie()})).catch((function(e){console.log(e),alert("Error: Post '".concat(Pe.title,"' was not posted"))})))},De=function(){Oe(),Te()},Te=function(){fe.push({pathname:"/dashboard"})},Le=function(){fe.push({pathname:"/"})},Pe={title:k,description:L,body:M,imageUrl:H,date:re,category:V,url:d};return l.a.createElement("div",null,l.a.createElement(h.e,{breakpoint:"touch"},l.a.createElement(h.a,{style:D},l.a.createElement("form",{onSubmit:Ee(Oe)},l.a.createElement(h.i,null,l.a.createElement(h.o,null,"Title"),l.a.createElement(h.g,null,l.a.createElement(h.n,{name:"Title",placeholder:"Post title",value:k,onChange:function(e){C(e.target.value)},ref:pe({required:!0,minLength:10,maxLength:60})}),l.a.createElement(h.j,{color:"danger"},"required"===(null===(t=ge.Title)||void 0===t?void 0:t.type)&&"Title is required"),l.a.createElement(h.j,{color:"danger"},"minLength"===(null===(a=ge.Title)||void 0===a?void 0:a.type)&&"Title is too short"),l.a.createElement(h.j,{color:"danger"},"maxLength"===(null===(c=ge.Title)||void 0===c?void 0:c.type)&&"Title is too long"),l.a.createElement(h.j,{color:"danger"},"pattern"===(null===(r=ge.Title)||void 0===r?void 0:r.type)&&"Must start with capital letter"))),l.a.createElement(h.i,null,l.a.createElement(h.o,null,"Body"),l.a.createElement(h.g,null,l.a.createElement(h.u,{name:"Body",rows:15,placeholder:"Write here",value:M,onChange:function(e){var t=e.target.value.substring(0,40);P(t),z(e.target.value)},ref:pe({required:!0,minLength:10,maxLength:5e3})}),l.a.createElement(h.j,{color:"danger"},"required"===(null===(i=ge.Body)||void 0===i?void 0:i.type)&&"Body is required"),l.a.createElement(h.j,{color:"danger"},"minLength"===(null===(u=ge.Body)||void 0===u?void 0:u.type)&&"Body is too short"),l.a.createElement(h.j,{color:"danger"},"maxLength"===(null===(s=ge.Body)||void 0===s?void 0:s.type)&&"Body is too long"))),l.a.createElement(h.i,null,l.a.createElement(h.o,null,"Category"),l.a.createElement(h.g,null,l.a.createElement(h.s.Container,null,l.a.createElement(h.s,{onChange:function(e){e.preventDefault(),$(e.target.value)}},X.map((function(e){return l.a.createElement(h.s.Option,{key:e.title,value:e.title},e.title)})))))),l.a.createElement(h.o,null,"Image"),l.a.createElement(h.i,{kind:"addons"},l.a.createElement(h.g,{iconLeft:!0},l.a.createElement(h.n,{placeholder:"Image URL",onChange:function(e){e.preventDefault(),F(e.target.value)}}),l.a.createElement(h.l,{size:"small",align:"left"},l.a.createElement(f.a,{icon:b.e}))),l.a.createElement(h.g,null,l.a.createElement(h.b,{onClick:function(e){e.preventDefault(),U(W)},color:"link"},"Add"))),l.a.createElement(h.q,null,l.a.createElement(h.q.Item,{as:"figure",align:"left"},l.a.createElement(h.m.Container,{as:"p",size:128},l.a.createElement("a",{href:H,target:"_blank",rel:"noreferrer noopener"},l.a.createElement(h.m,{alt:"Image preview",src:H}))))),l.a.createElement(h.h,null),l.a.createElement(h.i,{kind:"group"},l.a.createElement(h.g,{style:T},l.a.createElement(h.b.Group,null,l.a.createElement(h.n,{as:h.b,type:"submit",color:"link"},"Publish"),l.a.createElement(h.b,{text:!0,onClick:Ce},"Cancel"))))),l.a.createElement(B.a.Modal,ke),l.a.createElement(B.a.Modal,ve),l.a.createElement(B.a.Modal,xe))))}var P={margin:"20px"};function q(e){var t=Object(n.useState)("grey"),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!1),m=Object(o.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)(!1),p=Object(o.a)(d,2),E=p[0],v=p[1],O=e.comment,y="".concat("https://flotsamblog.herokuapp.com/api/comments/").concat(O.id);Object(n.useEffect)((function(){localStorage.getItem("likedComments".concat(O.postId))&&JSON.parse(localStorage.getItem("likedComments".concat(O.postId))).includes(O.id)&&!E&&(s(!0),r("info"),v(!0))}),[u]);var j=function(e){var t={author:O.author,content:O.content,date:O.date,likes:O.likes,postId:O.postId};g.a.put(y,t).then((function(e){})).catch((function(e){alert("".concat(e))}))};return l.a.createElement("div",null,l.a.createElement(h.q,{style:P},l.a.createElement(h.q.Item,{as:"figure",align:"left"},l.a.createElement(f.a,{size:"3x",icon:b.j})),l.a.createElement(h.q.Item,{align:"content"},l.a.createElement(h.f,null,l.a.createElement("p",null,l.a.createElement("strong",null,O.author)," ",l.a.createElement("small",null,"@",O.author)," ",l.a.createElement("small",null,O.date),l.a.createElement("br",null),O.content)),l.a.createElement(h.p,{breakpoint:"mobile"},l.a.createElement(h.p.Item,{align:"left"},l.a.createElement(h.p.Item,{as:"a"},l.a.createElement(h.l,{size:"small",color:c},l.a.createElement(f.a,{icon:b.d,onClick:function(){return function(e){var t=[];localStorage.getItem("likedComments".concat(O.postId))&&(t=JSON.parse(localStorage.getItem("likedComments".concat(O.postId)))),t.includes(O.id)||t.push(O.id),localStorage.setItem("likedComments".concat(O.postId),JSON.stringify(t)),u?(j(--O.likes),r("grey"),s(!1),localStorage.setItem("likedComments".concat(O.postId),"")):(r("info"),j(++O.likes),s(!0))}()}}))),l.a.createElement(h.f,null,l.a.createElement("small",null,O.likes)))))))}var N={padding:"16px"},M={margin:"auto",marginTop:"60px",marginBottom:"100px",padding:"48px"},z={marginTop:"20px",marginBottom:"20px"},J={borderRadius:"5px"},R={whiteSpace:"pre-line",fontSize:"18px"},H={width:"72%",marginLeft:"5%"},U={paddingLeft:"40px"},A={marginRight:"3px"},G={margin:"20px"},W={paddingTop:"20px"};function F(e){var t=e.match.params.id,a=Object(n.useState)([]),c=Object(o.a)(a,2),r=c[0],i=c[1],u=Object(n.useState)([]),s=Object(o.a)(u,2),d=s[0],p=s[1],E=Object(n.useState)(!0),v=Object(o.a)(E,2),O=v[0],y=v[1],j=Object(n.useState)([]),C=Object(o.a)(j,2),S=C[0],w=C[1],x=Object(n.useState)(""),I=Object(o.a)(x,2),B=I[0],D=I[1],T=Object(n.useState)("grey"),L=Object(o.a)(T,2),P=L[0],F=L[1],K=Object(n.useState)((localStorage.getItem("likedPosts")||localStorage.setItem("likedPosts",JSON.stringify([])),JSON.parse(localStorage.getItem("likedPosts")))),Y=Object(o.a)(K,2),V=Y[0],$=Y[1],_=Object(m.g)(),Q="https://flotsamblog.herokuapp.com/api/posts/",X=Q+"".concat(t),Z="https://flotsamblog.herokuapp.com/api/comments/";Object(n.useEffect)((function(){te(),ae(),ne(),V.includes(Number(t))?F("info"):F("grey")}),[t]);var ee=function(e){var t={title:r.title,description:r.description,body:r.body,date:r.date,url:r.url,imageUrl:r.imageUrl,category:r.category,postLikes:r.postLikes};g.a.put(X,t).then((function(e){})).catch((function(e){alert("".concat(e))}))},te=function(){g.a.get(X).then((function(e){i(e.data)})).catch((function(e){alert("".concat(e))}))},ae=function(){g.a.get(Z).then((function(e){ce(e.data)})).catch((function(e){alert("".concat(e))}))},ne=function(){g.a.get(Q).then((function(e){p(le(e.data))})).catch((function(e){alert("".concat(e))}))},le=function(e){for(var a=[],n=[];n.length<3;){var l=Math.floor(Math.random()*e.length);l!==Number(t)-1&&-1===n.indexOf(l)&&n.push(l)}for(var c=0,r=n;c<r.length;c++){var o=r[c];a.push(e[o])}return a},ce=function(e){for(var a=[],n=0;n<e.length;n++)Number(e[n].postId)===Number(t)&&a.push(e[n]);w(a)},re=function(e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[l,a,n].join(".")};return l.a.createElement("div",null,l.a.createElement(h.e,{breakpoint:"mobile",style:N},l.a.createElement(h.a,{style:M},l.a.createElement(h.f,null,l.a.createElement(h.v,{style:W},r.title),l.a.createElement(h.v,{size:6,onClick:function(e){_.push({pathname:"/search",state:{query:e.target.lastChild.data}})}},l.a.createElement("a",null,r.category)),l.a.createElement("p",null,r.date)),l.a.createElement(h.m.Container,{size:"16by9",style:z},l.a.createElement(h.m,{src:r.imageUrl,style:J})),l.a.createElement(h.f,{style:R},l.a.createElement("p",null,r.body)),l.a.createElement(h.p,{align:"center"},l.a.createElement(h.b,{style:H,outlined:!0,color:"#333",key:"#333",onClick:function(){return y(!O)}},"View Comments (",S.length,")"),l.a.createElement(h.l,{style:U,color:P,as:"a"},l.a.createElement(f.a,{style:A,size:"lg",icon:b.d,onClick:function(){return function(e){var a=JSON.parse(localStorage.getItem("likedPosts")),n=Number(t);if(a.includes(n)){if(ee(--r.postLikes),F("grey"),a.includes(n)){var l=a.indexOf(n);l>-1&&a.splice(l,1)}}else a.push(n),F("info"),ee(++r.postLikes);localStorage.setItem("likedPosts",JSON.stringify(a)),$(JSON.stringify(a))}()}}),l.a.createElement("small",null,r.postLikes))),l.a.createElement(h.f,{hidden:O,key:S.id},S.map((function(e){return l.a.createElement(q,{key:e.id,comment:e,postId:r.id})}))),l.a.createElement(h.f,{hidden:O},l.a.createElement(h.q,{style:G,as:"article"},l.a.createElement(h.q.Item,{align:"left"},l.a.createElement(f.a,{size:"3x",icon:b.j})),l.a.createElement(h.q.Item,{align:"content"},l.a.createElement(h.i,null,l.a.createElement(h.g,{as:"p"},l.a.createElement(h.u,{ref:function(e){D(e)},placeholder:"Add a comment..."}))),l.a.createElement(h.i,null,l.a.createElement(h.g,{as:"p"},l.a.createElement(h.b,{onClick:function(e){var a=re((new Date).toString()),n=B.value;if(B.value.length>0){var l={author:"Guest515",content:n,date:a,likes:0,postId:t};g.a.post(Z,l).then((function(e){B.value=""})).then((function(){return ae()})).catch((function(e){alert("".concat(e))}))}else alert("Comment length must be at least 1")}},"Post comment"))))))),l.a.createElement(h.a,{style:M},l.a.createElement(h.f,null,l.a.createElement(h.v,{style:W},"Recommended posts")),l.a.createElement(k,{posts:d}))))}var K={padding:"16px"},Y={margin:"auto",padding:"30px",marginTop:"100px",width:"320px"},V={marginTop:"20px"};function $(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),u=Object(o.a)(i,2),d=u[0],p=u[1],E=Object(n.useState)(""),f=Object(o.a)(E,2),b=f[0],v=f[1],O=Object(n.useState)(!1),y=Object(o.a)(O,2),j=y[0],k=y[1],C=s().setAuthTokens,S=Object(x.a)(),w=S.register,I=S.handleSubmit,B=S.errors;var D=function(){var e={username:b,password:d};g.a.post("https://flotsamblog.herokuapp.com/login/",e).then((function(e){200===e.status?e.headers.authorization.startsWith("Bearer ")&&(C(e.headers.authorization),r(!0)):k(!0)})).catch((function(e){k(!0)}))},T=function(e){"Enter"===e.key&&D()};return c?l.a.createElement(m.a,{to:"/dashboard"}):l.a.createElement("div",null,l.a.createElement(h.e,{breakpoint:"mobile",style:K},l.a.createElement(h.a,{style:Y},l.a.createElement("form",{onSubmit:I(D)},l.a.createElement(h.v,null,"Login"),l.a.createElement(h.j,{color:"danger"},j&&"Wrong username or password"),l.a.createElement(h.i,{align:"centered"},l.a.createElement(h.o,null,"Username"),l.a.createElement(h.g,null,l.a.createElement(h.n,{type:"text",color:"primary",name:"Username",placeholder:"Username",ref:w({required:!0}),onKeyDown:T,onChange:function(e){v(e.target.value)}}),l.a.createElement(h.j,{color:"danger"},B.Username&&"Username is required"))),l.a.createElement(h.i,{align:"centered"},l.a.createElement(h.o,null,"Password"),l.a.createElement(h.g,null,l.a.createElement(h.n,{type:"password",color:"primary",name:"Password",placeholder:"Password",ref:w({required:!0}),onKeyDown:T,onChange:function(e){p(e.target.value)}}),l.a.createElement(h.j,{color:"danger"},B.Password&&"Password is required"))),l.a.createElement(h.i,{style:V},l.a.createElement(h.g,null,l.a.createElement(h.n,{as:h.b,type:"submit",color:"primary"},"Login")))))))}var _={padding:"16px"},Q={margin:"auto",padding:"50px",marginTop:"50px",width:"80%"},X={marginTop:"20px",marginBottom:"20px"};function Z(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(-1),u=Object(o.a)(i,2),d=u[0],p=u[1],E=Object(n.useState)(-1),v=Object(o.a)(E,2),O=v[0],y=v[1],j=Object(I.useModali)({animated:!0,title:"Create a new post?",message:"A text editor will be opened",buttons:[l.a.createElement(B.a.Button,{label:"Cancel",isStyleCancel:!0,onClick:function(){return S()}}),l.a.createElement(B.a.Button,{label:"Go to editor",isStyleDefault:!0,onClick:function(){H.push({pathname:"/new"})}})]}),k=Object(o.a)(j,2),C=k[0],S=k[1],w=Object(I.useModali)({animated:!0,title:"Delete post ".concat(d,"?"),message:"Post will be permanently deleted.",buttons:[l.a.createElement(B.a.Button,{label:"Cancel",isStyleCancel:!0,onClick:function(){return T()}}),l.a.createElement(B.a.Button,{label:"Delete",isStyleDestructive:!0,onClick:function(){return function(e,t){g.a.delete(A+e).then((function(e){})).catch((function(e){alert("Error: Post  was not deleted")}));for(var a=[],n=0;n<c.length;n++)if(c[n].id===e){console.log(c[n].id),c.splice(n,1),a=c.splice(0);break}r(a),T()}(d)}})]}),x=Object(o.a)(w,2),D=x[0],T=x[1],L=Object(I.useModali)({animated:!0,title:"Edit post ".concat(O.id,"?"),message:"Post will be modified",buttons:[l.a.createElement(B.a.Button,{label:"Cancel",isStyleCancel:!0,onClick:function(){return N()}}),l.a.createElement(B.a.Button,{label:"Edit",isStyleDefault:!0,onClick:function(){return e=O,void H.push({pathname:"/edit",state:{postData:e}});var e}})]}),P=Object(o.a)(L,2),q=P[0],N=P[1],M=Object(I.useModali)({animated:!0,title:"Log out?",buttons:[l.a.createElement(B.a.Button,{label:"Cancel",isStyleCancel:!0,onClick:function(){return R()}}),l.a.createElement(B.a.Button,{label:"Log out",isStyleDestructive:!0,onClick:function(){U("")}})]}),z=Object(o.a)(M,2),J=z[0],R=z[1],H=Object(m.g)(),U=s().setAuthTokens,A="https://flotsamblog.herokuapp.com/api/posts/";return Object(n.useEffect)((function(){g.a.get(A).then((function(e){r(e.data)})).catch((function(e){alert("".concat(e))}))}),[]),l.a.createElement("div",null,l.a.createElement(h.e,{breakpoint:"mobile",style:_},l.a.createElement(h.a,{style:Q},l.a.createElement(h.b.Group,{align:"right"},l.a.createElement(h.b,{onClick:R,color:"danger"},l.a.createElement(h.l,{size:"small"},l.a.createElement(f.a,{icon:b.h})),l.a.createElement("span",null,"Log out"))),l.a.createElement(h.v,null,"Dashboard"),l.a.createElement(h.b,{style:X,color:"success",onClick:function(e){return S()}},l.a.createElement(h.l,{size:"small"},l.a.createElement(f.a,{icon:b.f})),l.a.createElement("span",null,"New post")),l.a.createElement(h.o,null,"All posts"),l.a.createElement(h.t,{fullwidth:!0},l.a.createElement(h.t.Head,null,l.a.createElement(h.t.Row,null,l.a.createElement(h.t.Heading,null,"ID"),l.a.createElement(h.t.Heading,null,"Title"),l.a.createElement(h.t.Heading,null,"Description"),l.a.createElement(h.t.Heading,null,"Date"),l.a.createElement(h.t.Heading,null,"Comments"),l.a.createElement(h.t.Heading,null,"Edit"),l.a.createElement(h.t.Heading,null,"Remove"))),l.a.createElement(h.t.Body,null,c.map((function(e){return l.a.createElement(h.t.Row,{key:e.id},l.a.createElement(h.t.Cell,null,e.id),l.a.createElement(h.t.Cell,null,e.title),l.a.createElement(h.t.Cell,null,e.description.substring(0,40)+"..."),l.a.createElement(h.t.Cell,null,e.date),l.a.createElement(h.t.Cell,null,l.a.createElement(h.b,{color:"info",onClick:function(t){var a;a=e,H.push({pathname:"/comments",state:{postData:a}})}},l.a.createElement(h.l,null,l.a.createElement(f.a,{icon:b.b})))),l.a.createElement(h.t.Cell,null,l.a.createElement(h.b,{color:"info",onClick:function(t){y(e),N()}},l.a.createElement(h.l,null,l.a.createElement(f.a,{icon:b.c})))),l.a.createElement(h.t.Cell,null,l.a.createElement(h.b,{color:"danger",onClick:function(t){p(e.id),T()}},l.a.createElement(h.l,null,l.a.createElement(f.a,{icon:b.i})))))})))),l.a.createElement(B.a.Modal,D),l.a.createElement(B.a.Modal,q),l.a.createElement(B.a.Modal,J),l.a.createElement(B.a.Modal,C))))}function ee(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(x.a)(),i=r.register,u=r.handleSubmit,s=Object(m.g)(),d=function(){s.push({pathname:"/search",state:{query:a}}),c("")};return l.a.createElement("div",null,l.a.createElement("form",{onSubmit:u(d)},l.a.createElement(h.i,{kind:"addons"},l.a.createElement(h.g,null,l.a.createElement(h.n,{type:"text",name:"Search",value:a,onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d()},placeholder:"Search posts",ref:i({required:!0,minLength:1})})),l.a.createElement(h.g,null,l.a.createElement(h.n,{as:h.b,color:"primary",type:"submit"},l.a.createElement(h.l,null,l.a.createElement(f.a,{icon:b.g})))))))}function te(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),u=Object(o.a)(r,2),s=u[0],d=u[1],p=Object(m.g)();Object(n.useEffect)((function(){g.a.get("https://flotsamblog.herokuapp.com/api/categories/").then((function(e){d(e.data)})).catch((function(e){alert("Backend error: ".concat(e))}))}),[]);var E=function(e){p.push({pathname:"/search",state:{query:e.target.firstChild.data}})};return l.a.createElement("div",null,l.a.createElement(h.r,{fixed:"top",active:a},l.a.createElement(h.r.Brand,null,l.a.createElement(h.r.Item,{as:i.b,to:"/"},l.a.createElement(h.m,{src:"favicon.png"})),l.a.createElement(h.r.Burger,{onClick:function(){return c(!a)}})),l.a.createElement(h.r.Menu,null,l.a.createElement(h.r.Segment,{align:"start"},s.map((function(e){return l.a.createElement(h.r.Item,{key:e.id,onClick:E},e.title)}))),l.a.createElement(h.r.Segment,{align:"end"},l.a.createElement(h.r.Item,{as:"div"},l.a.createElement(ee,null)),l.a.createElement(h.r.Item,{as:"div"},l.a.createElement(h.l,{as:i.b,to:"/dashboard",color:"primary"},l.a.createElement(f.a,{icon:b.j,size:"lg"})))))))}function ae(e){var t=Object(n.useState)([]),a=Object(o.a)(t,2),c=a[0],r=a[1],i=e.location.state.query,u=Object(m.g)();Object(n.useEffect)((function(){void 0!==e.location.state&&(i=e.location.state.query,g.a.get("https://flotsamblog.herokuapp.com/api/posts/").then((function(e){r(s(e.data,i))})).catch((function(e){alert("".concat(e))})))}),[e.location.state.query]);var s=function(e,t){return e.filter((function(e){return-1!==e.title.toLowerCase().indexOf(t.toLowerCase())||-1!==e.category.toLowerCase().indexOf(t.toLowerCase())}))};return l.a.createElement("div",null,l.a.createElement(h.e,{style:{marginTop:"20px"}},l.a.createElement(h.v,null,'"',i,'"'),l.a.createElement(h.v,null,"Results: ",c.length," "),l.a.createElement(k,{posts:c}),l.a.createElement(h.b,{style:{marginTop:"20px"},onClick:function(e){u.goBack()}},"Back")))}var ne={margin:"auto",padding:"50px",marginTop:"50px",maxWidth:"80%"},le={marginTop:"20px"};function ce(e){var t=e.location.state.postData,a=t.id,c=Object(m.g)(),r=Object(n.useState)([]),i=Object(o.a)(r,2),u=i[0],s=i[1],d=Object(n.useState)(-1),p=Object(o.a)(d,2),E=p[0],v=p[1],O=Object(I.useModali)({animated:!0,title:"Delete comment ".concat(E,"?"),message:"Comment will be permanently deleted.",buttons:[l.a.createElement(B.a.Button,{label:"Cancel",isStyleCancel:!0,onClick:function(){return k()}}),l.a.createElement(B.a.Button,{label:"Delete",isStyleDestructive:!0,onClick:function(){return function(e,t){g.a.delete(C+e).then((function(e){})).catch((function(e){alert("Error: Comment  was not deleted")}));for(var a=[],n=0;n<u.length;n++)if(u[n].id===e){u.splice(n,1),a=u.splice(0);break}s(a),k()}(E)}})]}),y=Object(o.a)(O,2),j=y[0],k=y[1],C="https://flotsamblog.herokuapp.com/api/comments/";Object(n.useEffect)((function(){S()}),[]);var S=function(){g.a.get(C).then((function(e){w(e.data)})).catch((function(e){alert("".concat(e))}))},w=function(e){for(var t=[],n=0;n<e.length;n++)Number(e[n].postId)===Number(a)&&t.push(e[n]);s(t)};return l.a.createElement("div",null,l.a.createElement(h.a,{style:ne},l.a.createElement(h.v,null,"Comments for post:"),l.a.createElement(h.o,null,t.id," - ",t.title),l.a.createElement(h.o,null,"All comments"),l.a.createElement(h.t,{fullwidth:!0},l.a.createElement(h.t.Head,null,l.a.createElement(h.t.Row,null,l.a.createElement(h.t.Heading,null,"ID"),l.a.createElement(h.t.Heading,null,"Comment"),l.a.createElement(h.t.Heading,null,"Likes"),l.a.createElement(h.t.Heading,null,"Date"),l.a.createElement(h.t.Heading,null,"Remove"))),l.a.createElement(h.t.Body,null,u.map((function(e){return l.a.createElement(h.t.Row,{key:e.id},l.a.createElement(h.t.Cell,null,e.id),l.a.createElement(h.t.Cell,null,function(e){if(e.length>20){return e.substring(0,40)+"..."}return e}(e.content)),l.a.createElement(h.t.Cell,null,e.likes),l.a.createElement(h.t.Cell,null,e.date),l.a.createElement(h.t.Cell,null,l.a.createElement(h.b,{color:"danger",onClick:function(t){v(e.id),k()}},l.a.createElement(h.l,null,l.a.createElement(f.a,{icon:b.i})))))})))),l.a.createElement(h.b,{style:le,onClick:function(e){c.goBack()}},"Back"),l.a.createElement(B.a.Modal,j)))}var re={marginTop:"100px"};function oe(){return l.a.createElement("div",null,l.a.createElement(h.e,null,l.a.createElement(h.p,null,l.a.createElement(h.p.Item,{textAlign:"centered"},l.a.createElement(h.v,{style:re},"404 Page not found")))))}function ie(){var e=JSON.parse(localStorage.getItem("tokens")),t=Object(n.useState)(e),a=Object(o.a)(t,2),c=a[0],r=a[1];return l.a.createElement(u.Provider,{value:{authTokens:c,setAuthTokens:function(e){localStorage.setItem("tokens",JSON.stringify(e)),r(e)}}},l.a.createElement(i.a,null,l.a.createElement(te,null),l.a.createElement("div",null,l.a.createElement(m.d,null,l.a.createElement(m.b,{path:"/",exact:!0,component:w}),l.a.createElement(m.b,{path:"/search",component:ae}),l.a.createElement(m.b,{path:"/posts/:id",component:F}),l.a.createElement(m.b,{path:"/login",component:$}),l.a.createElement(p,{path:"/dashboard",component:Z}),l.a.createElement(p,{path:"/new",component:L}),l.a.createElement(p,{path:"/edit",component:L}),l.a.createElement(p,{path:"/comments",component:ce}),l.a.createElement(m.b,{path:"*",component:oe})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[45,1,2]]]);
//# sourceMappingURL=main.3d07254d.chunk.js.map